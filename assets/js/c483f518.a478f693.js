"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3036],{72187:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>c,metadata:()=>o,toc:()=>h});var t=a(85893),i=a(11151),r=a(65488),l=a(85162);const c={},s="Feedback",o={id:"guides/tracking/feedback",title:"Feedback",description:"Efficiently evaluating LLM applications requires robust tooling to collect and analyze feedback. Weave provides an integrated feedback system, allowing users to provide call feedback directly through the UI or programmatically via the SDK. Various feedback types are supported, including emoji reactions, textual comments, and structured data, enabling teams to:",source:"@site/docs/guides/tracking/feedback.md",sourceDirName:"guides/tracking",slug:"/guides/tracking/feedback",permalink:"/guides/tracking/feedback",draft:!1,unlisted:!1,editUrl:"https://github.com/wandb/weave/blob/master/docs/docs/guides/tracking/feedback.md",tags:[],version:"current",lastUpdatedAt:1749652482e3,frontMatter:{},sidebar:"documentationSidebar",previous:{title:"EvaluationLogger",permalink:"/guides/evaluation/evaluation_logger"},next:{title:"Redacting PII",permalink:"/guides/tracking/redact-pii"}},d={},h=[{value:"Provide feedback in the UI",id:"provide-feedback-in-the-ui",level:2},{value:"From the call details page",id:"from-the-call-details-page",level:3},{value:"Use the icons",id:"use-the-icons",level:3},{value:"Provide feedback via the SDK",id:"provide-feedback-via-the-sdk",level:2},{value:"Query a project&#39;s feedback",id:"query-a-projects-feedback",level:3},{value:"Add feedback to a call",id:"add-feedback-to-a-call",level:3},{value:"Retrieve the call UUID",id:"retrieve-the-call-uuid",level:4},{value:"During call execution",id:"during-call-execution",level:5},{value:"After call execution",id:"after-call-execution",level:5},{value:"Delete feedback from a call",id:"delete-feedback-from-a-call",level:3},{value:"Add human annotations",id:"add-human-annotations",level:2},{value:"Create a human annotation scorer in the UI",id:"create-a-human-annotation-scorer-in-the-ui",level:3},{value:"Use the human annotation scorer in the UI",id:"use-the-human-annotation-scorer-in-the-ui",level:3},{value:"Create a human annotation scorer using the API",id:"create-a-human-annotation-scorer-using-the-api",level:3},{value:"Modify a human annotation scorer using the API",id:"modify-a-human-annotation-scorer-using-the-api",level:3},{value:"Use a human annotation scorer using the API",id:"use-a-human-annotation-scorer-using-the-api",level:3}];function u(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"feedback",children:"Feedback"}),"\n",(0,t.jsx)(n.p,{children:"Efficiently evaluating LLM applications requires robust tooling to collect and analyze feedback. Weave provides an integrated feedback system, allowing users to provide call feedback directly through the UI or programmatically via the SDK. Various feedback types are supported, including emoji reactions, textual comments, and structured data, enabling teams to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Build evaluation datasets for performance monitoring."}),"\n",(0,t.jsx)(n.li,{children:"Identify and resolve LLM content issues effectively."}),"\n",(0,t.jsx)(n.li,{children:"Gather examples for advanced tasks like fine-tuning."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This guide covers how to use Weave\u2019s feedback functionality in both the UI and SDK, query and manage feedback, and use human annotations for detailed evaluations."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#provide-feedback-in-the-ui",children:"Provide feedback in the UI"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#provide-feedback-via-the-sdk",children:"Provide feedback via the SDK"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#add-human-annotations",children:"Add human annotations"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"provide-feedback-in-the-ui",children:"Provide feedback in the UI"}),"\n",(0,t.jsxs)(n.p,{children:["In the Weave UI, you can add and view feedback ",(0,t.jsx)(n.a,{href:"#from-the-call-details-page",children:"from the call details page"})," or ",(0,t.jsx)(n.a,{href:"#use-the-icons",children:"using the icons"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"from-the-call-details-page",children:"From the call details page"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In the sidebar, navigate to ",(0,t.jsx)(n.strong,{children:"Traces"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Find the row for the call that you want to add feedback to."}),"\n",(0,t.jsx)(n.li,{children:"Open the call details page."}),"\n",(0,t.jsxs)(n.li,{children:["Select the ",(0,t.jsx)(n.strong,{children:"Feedback"})," column for the call."]}),"\n",(0,t.jsxs)(n.li,{children:["Add, view, or delete feedback:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:(0,t.jsx)(n.a,{href:"#use-the-icons",children:"Add and view feedback using the icons"})})," located in the upper right corner of the call details feedback view."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"View and delete feedback from the call details feedback table."})," Delete feedback by clicking the trashcan icon in the rightmost column of the appropriate feedback row."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Screenshot of Feedback tab in call details",src:a(35570).Z+"",width:"1266",height:"548"})}),"\n",(0,t.jsx)(n.h3,{id:"use-the-icons",children:"Use the icons"}),"\n",(0,t.jsx)(n.p,{children:"You can add or remove a reaction, and add a note using the icons that are located in both the call table and individual call details pages."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Call table"}),": Located in ",(0,t.jsx)(n.strong,{children:"Feedback"})," column in the appropriate row in the call table."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Call details page"}),": Located in the upper right corner of each call details page."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To add a reaction:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Click the emoji icon."}),"\n",(0,t.jsxs)(n.li,{children:["Add a thumbs up, thumbs down, or click the ",(0,t.jsx)(n.strong,{children:"+"})," icon for more emojis."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To remove a reaction:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Hover over the emoji reaction you want to remove."}),"\n",(0,t.jsx)(n.li,{children:"Click the reaction to remove it."}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["You can also delete feedback from the ",(0,t.jsxs)(n.a,{href:"#from-the-call-details-page",children:[(0,t.jsx)(n.strong,{children:"Feedback"})," column on the call details page."]}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To add a comment:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Click the comment bubble icon."}),"\n",(0,t.jsx)(n.li,{children:"In the text box, add your note."}),"\n",(0,t.jsxs)(n.li,{children:["To save the note, press the ",(0,t.jsx)(n.strong,{children:"Enter"})," key. You can add additional notes."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"important",children:(0,t.jsx)(n.p,{children:"The maximum number of characters in a feedback note is 1024. If a note exceeds this limit, it will not be created."})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Screenshot of calls grid with feedback column",src:a(60181).Z+"",width:"3170",height:"1589"})}),"\n",(0,t.jsx)(n.h2,{id:"provide-feedback-via-the-sdk",children:"Provide feedback via the SDK"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["You can find SDK usage examples for feedback in the UI under the ",(0,t.jsx)(n.strong,{children:"Use"})," tab in the call details page."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You can use the Weave SDK to programmatically add, remove, and query feedback on calls."}),"\n",(0,t.jsx)(n.h3,{id:"query-a-projects-feedback",children:"Query a project's feedback"}),"\n",(0,t.jsx)(n.p,{children:"You can query the feedback for your Weave project using the SDK. The SDK supports the following feedback query operations:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"client.get_feedback()"}),": Returns all feedback in a project."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'client.get_feedback("<feedback_uuid>")'}),": Return a specific feedback object specified by ",(0,t.jsx)(n.code,{children:"<feedback_uuid>"})," as a collection."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'client.get_feedback(reaction="<reaction_type>")'}),": Returns all feedback objects for a specific reaction type."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You can also get additional information for each feedback object in ",(0,t.jsx)(n.code,{children:"client.get_feedback()"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"}),": The feedback object ID."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"created_at"}),": The creation time information for the feedback object."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"feedback_type"}),": The type of feedback (reaction, note, custom)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"payload"}),": The feedback payload"]}),"\n"]}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import weave\nclient = weave.init(\'intro-example\')\n\n# Get all feedback in a project\nall_feedback = client.get_feedback()\n\n# Fetch a specific feedback object by id.\n# The API returns a collection, which is expected to contain at most one item.\none_feedback = client.get_feedback("<feedback_uuid>")[0]\n\n# Find all feedback objects with a specific reaction. You can specify offset and limit.\nthumbs_up = client.get_feedback(reaction="\ud83d\udc4d", limit=10)\n\n# After retrieval, view the details of individual feedback objects.\nfor f in client.get_feedback():\n    print(f.id)\n    print(f.created_at)\n    print(f.feedback_type)\n    print(f.payload)\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"add-feedback-to-a-call",children:"Add feedback to a call"}),"\n",(0,t.jsxs)(n.p,{children:["You can add feedback to a call using the call's UUID. To use the UUID to get a particular call, ",(0,t.jsx)(n.a,{href:"#retrieve-the-call-uuid",children:"retrieve it during or after call execution"}),". The SDK supports the following operations for adding feedback to a call:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'call.feedback.add_reaction("<reaction_type>")'}),": Add one of the supported ",(0,t.jsx)(n.code,{children:"<reaction_types>"})," (emojis), such as \ud83d\udc4d."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'call.feedback.add_note("<note>")'}),": Add a note."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'call.feedback.add("<label>", <object>)'}),": Add a custom feedback ",(0,t.jsx)(n.code,{children:"<object>"})," specified by ",(0,t.jsx)(n.code,{children:"<label>"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"important",children:(0,t.jsx)(n.p,{children:"The maximum number of characters in a feedback note is 1024. If a note exceeds this limit, it will not be created."})}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import weave\nclient = weave.init(\'intro-example\')\n\ncall = client.get_call("<call_uuid>")\n\n# Adding an emoji reaction\ncall.feedback.add_reaction("\ud83d\udc4d")\n\n# Adding a note\ncall.feedback.add_note("this is a note")\n\n# Adding custom key/value pairs.\n# The first argument is a user-defined "type" string.\n# Feedback must be JSON serializable and less than 1 KB when serialized.\ncall.feedback.add("correctness", { "value": 5 })\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.h4,{id:"retrieve-the-call-uuid",children:"Retrieve the call UUID"}),"\n",(0,t.jsx)(n.p,{children:"For scenarios where you need to add feedback immediately after a call, you can retrieve the call UUID programmatically during or after the call execution."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#during-call-execution",children:"During call execution"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#after-call-execution",children:"After call execution"})}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"during-call-execution",children:"During call execution"}),"\n",(0,t.jsx)(n.p,{children:"To retrieve the UUID during call execution, get the current call, and return the ID."}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'\nimport weave\nweave.init("uuid")\n\n@weave.op()\ndef simple_operation(input_value):\n    # Perform some simple operation\n    output = f"Processed {input_value}"\n    # Get the current call ID\n    current_call = weave.require_current_call()\n    call_id = current_call.id\n    return output, call_id\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.h5,{id:"after-call-execution",children:"After call execution"}),"\n",(0,t.jsxs)(n.p,{children:["Alternatively, you can use ",(0,t.jsx)(n.code,{children:"call()"})," method to execute the operation and retrieve the ID after call execution:"]}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import weave\nweave.init("uuid")\n\n@weave.op()\ndef simple_operation(input_value):\n    return f"Processed {input_value}"\n\n# Execute the operation and retrieve the result and call ID\nresult, call = simple_operation.call("example input")\ncall_id = call.id\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"delete-feedback-from-a-call",children:"Delete feedback from a call"}),"\n",(0,t.jsx)(n.p,{children:"You can delete feedback from a particular call by specifying a UUID."}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'call.feedback.purge("<feedback_uuid>")\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"add-human-annotations",children:"Add human annotations"}),"\n",(0,t.jsxs)(n.p,{children:["Human annotations are supported in the Weave UI. To make human annotations, you must first create a Human Annotation scorer using either the ",(0,t.jsx)(n.a,{href:"#create-a-human-annotation-scorer-in-the-ui",children:"UI"})," or the ",(0,t.jsx)(n.a,{href:"#create-a-human-annotation-scorer-using-the-api",children:"API"}),". Then, you can ",(0,t.jsx)(n.a,{href:"#use-the-human-annotation-scorer-in-the-ui",children:"use the scorer in the UI to make annotations"}),", and ",(0,t.jsx)(n.a,{href:"#modify-a-human-annotation-scorer-using-the-api",children:"modify your annotation scorers using the API"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"create-a-human-annotation-scorer-in-the-ui",children:"Create a human annotation scorer in the UI"}),"\n",(0,t.jsx)(n.p,{children:"To create a human annotation scorer in the UI, do the following:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In the sidebar, navigate to ",(0,t.jsx)(n.strong,{children:"Scorers"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["In the upper right corner, click ",(0,t.jsx)(n.strong,{children:"+ Create scorer"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["In the configuration page, set:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Scorer type"})," to ",(0,t.jsx)(n.code,{children:"Human annotation"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Name"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Description"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Type"}),", which determines the type of feedback that will be collected, such as ",(0,t.jsx)(n.code,{children:"boolean"})," or ",(0,t.jsx)(n.code,{children:"integer"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Create scorer"}),". Now, you can ",(0,t.jsx)(n.a,{href:"#use-the-human-annotation-scorer-in-the-ui",children:"use your scorer to make annotations"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In the following example, a human annotator is asked to select which type of document the LLM ingested. As such, the ",(0,t.jsx)(n.code,{children:"Type"})," selected for the score configuration is an ",(0,t.jsx)(n.code,{children:"enum"})," containing the possible document types."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Human Annotation scorer form",src:a(50641).Z+"",width:"3454",height:"1862"})}),"\n",(0,t.jsx)(n.h3,{id:"use-the-human-annotation-scorer-in-the-ui",children:"Use the human annotation scorer in the UI"}),"\n",(0,t.jsxs)(n.p,{children:["Once you ",(0,t.jsx)(n.a,{href:"#create-a-human-annotation-scorer-in-the-ui",children:"create a human annotation scorer"}),", it will automatically display in the ",(0,t.jsx)(n.strong,{children:"Feedback"})," sidebar of the call details page with the configured options. To use the scorer, do the following:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the sidebar, navigate to ",(0,t.jsx)(n.strong,{children:"Traces"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Find the row for the call that you want to add a human annotation to."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Open the call details page."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the upper right corner, click the ",(0,t.jsx)(n.strong,{children:"Show feedback"})," button."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Marker icon in call header",src:a(25069).Z+"",width:"306",height:"84"})}),"\n",(0,t.jsx)(n.p,{children:"Your available human annotation scorers display in the sidebar."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Human Annotation scorer feedback sidebar",src:a(59772).Z+"",width:"3454",height:"1862"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Make an annotation."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click ",(0,t.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the call details page, click ",(0,t.jsx)(n.strong,{children:"Feedback"})," to view the calls table. The new annotation displays in the table. You can also view the annotations in the ",(0,t.jsx)(n.strong,{children:"Annotations"})," column in the call table in ",(0,t.jsx)(n.strong,{children:"Traces"}),"."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Refresh the call table to view the most up-to-date information."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Human Annotation scorer feedback in calls table",src:a(75970).Z+"",width:"3456",height:"1569"})}),"\n",(0,t.jsx)(n.h3,{id:"create-a-human-annotation-scorer-using-the-api",children:"Create a human annotation scorer using the API"}),"\n",(0,t.jsx)(n.p,{children:"Human annotation scorers can also be created through the API. Each scorer is its own object, which is created and updated independently. To create a human annotation scorer programmatically, do the following:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Import the ",(0,t.jsx)(n.code,{children:"AnnotationSpec"})," class from ",(0,t.jsx)(n.code,{children:"weave.flow.annotation_spec"})]}),"\n",(0,t.jsxs)(n.li,{children:["Use the ",(0,t.jsx)(n.code,{children:"publish"})," method from ",(0,t.jsx)(n.code,{children:"weave"})," to create the scorer."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["In the following example, two scorers are created. The first scorer, ",(0,t.jsx)(n.code,{children:"Temperature"}),", is used to score the perceived temperature of the LLM call. The second scorer, ",(0,t.jsx)(n.code,{children:"Tone"}),", is used to score the tone of the LLM response. Each scorer is created using ",(0,t.jsx)(n.code,{children:"save"})," with an associated object ID (",(0,t.jsx)(n.code,{children:"temperature-scorer"})," and ",(0,t.jsx)(n.code,{children:"tone-scorer"}),")."]}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import weave\nfrom weave.flow.annotation_spec import AnnotationSpec\n\nclient = weave.init("feedback-example")\n\nspec1 = AnnotationSpec(\n  name="Temperature",\n  description="The perceived temperature of the llm call",\n  field_schema={\n    "type": "number",\n    "minimum": -1,\n    "maximum": 1,\n  }\n)\nspec2 = AnnotationSpec(\n  name="Tone",\n  description="The tone of the llm response",\n  field_schema={\n    "type": "string",\n    "enum": ["Aggressive", "Neutral", "Polite", "N/A"],\n  },\n)\nweave.publish(spec1, "temperature-scorer")\nweave.publish(spec2, "tone-scorer")\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"modify-a-human-annotation-scorer-using-the-api",children:"Modify a human annotation scorer using the API"}),"\n",(0,t.jsxs)(n.p,{children:["Expanding on ",(0,t.jsx)(n.a,{href:"#create-a-human-annotation-scorer-using-the-api",children:"creating a human annotation scorer using the API"}),", the following example creates an updated version of the ",(0,t.jsx)(n.code,{children:"Temperature"})," scorer, by using the original object ID (",(0,t.jsx)(n.code,{children:"temperature-scorer"}),") on ",(0,t.jsx)(n.code,{children:"publish"}),". The result is an updated object, with a history of all versions."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["You can view human annotation scorer object history in the ",(0,t.jsx)(n.strong,{children:"Scorers"})," tab under ",(0,t.jsx)(n.strong,{children:"Human annotations"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(r.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import weave\nfrom weave.flow.annotation_spec import AnnotationSpec\n\nclient = weave.init("feedback-example")\n\n# create a new version of the scorer\nspec1 = AnnotationSpec(\n  name="Temperature",\n  description="The perceived temperature of the llm call",\n  field_schema={\n    "type": "integer",  # <<- change type to integer\n    "minimum": -1,\n    "maximum": 1,\n  }\n)\nweave.publish(spec1, "temperature-scorer")\n'})})}),(0,t.jsx)(l.default,{value:"typescript",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"This feature is not available in TypeScript yet.  Stay tuned!\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Human Annotation scorer history",src:a(16221).Z+"",width:"2686",height:"1434"})}),"\n",(0,t.jsx)(n.h3,{id:"use-a-human-annotation-scorer-using-the-api",children:"Use a human annotation scorer using the API"}),"\n",(0,t.jsxs)(n.p,{children:["The feedback API allows you to use a human annotation scorer by specifying a specially constructed name and an ",(0,t.jsx)(n.code,{children:"annotation_ref"})," field. You can obtain the ",(0,t.jsx)(n.code,{children:"annotation_spec_ref"})," from the UI by selecting the appropriate tab, or during the creation of the ",(0,t.jsx)(n.code,{children:"AnnotationSpec"}),"."]}),"\n",(0,t.jsx)(r.Z,{groupId:"programming-language",queryString:!0,children:(0,t.jsx)(l.default,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import weave\n\nclient = weave.init("feedback-example")\n\ncall = client.get_call("<call_id>")\nannotation_spec = weave.ref("<annotation_spec_ref_uri>")\n\ncall.feedback.add(\n  feedback_type="wandb.annotation." + annotation_spec.name,\n  payload={"value": 1},\n  annotation_ref=annotation_spec.uri(),\n)\n'})})})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},85162:(e,n,a)=>{a.r(n),a.d(n,{default:()=>l});a(67294);var t=a(90512);const i={tabItem:"tabItem_Ymn6"};var r=a(85893);function l(e){let{children:n,hidden:a,className:l}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.Z)(i.tabItem,l),hidden:a,children:n})}},65488:(e,n,a)=>{a.d(n,{Z:()=>p});var t=a(67294),i=a(90512),r=a(12466),l=a(70989),c=a(72389);const s={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var o=a(85893);function d(e){let{className:n,block:a,selectedValue:t,selectValue:l,tabValues:c}=e;const d=[],{blockElementScrollPositionUntilNextRender:h}=(0,r.o5)(),u=e=>{const n=e.currentTarget,a=d.indexOf(n),i=c[a].value;i!==t&&(h(n),l(i))},p=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=d.indexOf(e.currentTarget)+1;n=d[a]??d[0];break}case"ArrowLeft":{const a=d.indexOf(e.currentTarget)-1;n=d[a]??d[d.length-1];break}}n?.focus()};return(0,o.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},n),children:c.map((e=>{let{value:n,label:a,attributes:r}=e;return(0,o.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>d.push(e),onKeyDown:p,onClick:u,...r,className:(0,i.Z)("tabs__item",s.tabItem,r?.className,{"tabs__item--active":t===n}),children:a??n},n)}))})}function h(e){let{lazy:n,children:a,selectedValue:i}=e;const r=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===i));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,o.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function u(e){const n=(0,l.Y)(e);return(0,o.jsxs)("div",{className:(0,i.Z)("tabs-container",s.tabList),children:[(0,o.jsx)(d,{...n,...e}),(0,o.jsx)(h,{...n,...e})]})}function p(e){const n=(0,c.default)();return(0,o.jsx)(u,{...e,children:(0,l.h)(e.children)},String(n))}},70989:(e,n,a)=>{a.d(n,{Y:()=>p,h:()=>o});var t=a(67294),i=a(16550),r=a(20469),l=a(91980),c=a(67392),s=a(20812);function o(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return o(e).map((e=>{let{props:{value:n,label:a,attributes:t,default:i}}=e;return{value:n,label:a,attributes:t,default:i}}))}(a);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function h(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function u(e){let{queryString:n=!1,groupId:a}=e;const r=(0,i.k6)(),c=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,l._X)(c),(0,t.useCallback)((e=>{if(!c)return;const n=new URLSearchParams(r.location.search);n.set(c,e),r.replace({...r.location,search:n.toString()})}),[c,r])]}function p(e){const{defaultValue:n,queryString:a=!1,groupId:i}=e,l=d(e),[c,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=a.find((e=>e.default))??a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:l}))),[p,f]=u({queryString:a,groupId:i}),[m,x]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,r]=(0,s.Nk)(a);return[i,(0,t.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:i}),g=(()=>{const e=p??m;return h({value:e,tabValues:l})?e:null})();(0,r.Z)((()=>{g&&o(g)}),[g]);return{selectedValue:c,selectValue:(0,t.useCallback)((e=>{if(!h({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),f(e),x(e)}),[f,x,l]),tabValues:l}}},75970:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/feedback-in-the-table-604c10a77ccd12d2179d201f0a29db34.png"},60181:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/feedback_calls-7185aaa5f8c703b00f8272ed8ff4eb02.png"},35570:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/feedback_tab-1d31beb2809461a56d05b90442e19912.png"},59772:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/full-feedback-sidebar-7afb18ea536059278ec74f8ccb2e823a.png"},50641:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/human-annotation-scorer-form-d47a587c7e761d7945f01bd825867766.png"},16221:(e,n,a)=>{a.d(n,{Z:()=>t});const t=a.p+"assets/images/human-annotation-scorer-history-a4be17132b597224d8a5c6e0c56880d8.png"},25069:(e,n,a)=>{a.d(n,{Z:()=>t});const t="data:image/png;base64,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"},11151:(e,n,a)=>{a.d(n,{Z:()=>c,a:()=>l});var t=a(67294);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);