"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4297],{89463:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=t(85893),r=t(11151);const a={title:"Introduction to Traces"},i=void 0,s={id:"reference/gen_notebooks/Intro_to_Weave_Hello_Trace",title:"Introduction to Traces",description:"Open in Colab",source:"@site/docs/reference/gen_notebooks/Intro_to_Weave_Hello_Trace.md",sourceDirName:"reference/gen_notebooks",slug:"/reference/gen_notebooks/Intro_to_Weave_Hello_Trace",permalink:"/reference/gen_notebooks/Intro_to_Weave_Hello_Trace",draft:!1,unlisted:!1,editUrl:"https://github.com/wandb/weave/blob/master/docs/docs/reference/gen_notebooks/Intro_to_Weave_Hello_Trace.md",tags:[],version:"current",lastUpdatedAt:1744881632e3,frontMatter:{title:"Introduction to Traces"},sidebar:"notebookSidebar",previous:{title:"Introduction to Evaluations",permalink:"/reference/gen_notebooks/Intro_to_Weave_Hello_Eval"},next:{title:"Weave with W&B Models",permalink:"/reference/gen_notebooks/Models_and_Weave_Integration_Demo"}},c={},l=[{value:"\ud83d\udd11 Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\udc1d Run your first trace",id:"-run-your-first-trace",level:2},{value:"\ud83d\ude80 Looking for more examples?",id:"-looking-for-more-examples",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.admonition,{title:"This is a notebook",type:"tip",children:[(0,o.jsx)("a",{href:"https://colab.research.google.com/github/wandb/weave/blob/master/docs/./notebooks/Intro_to_Weave_Hello_Trace.ipynb",target:"_blank",rel:"noopener noreferrer",class:"navbar__item navbar__link button button--secondary button--med margin-right--sm notebook-cta-button",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/archive/d/d0/20221103151430%21Google_Colaboratory_SVG_Logo.svg",alt:"Open In Colab",height:"20px"}),(0,o.jsx)("div",{children:"Open in Colab"})]})}),(0,o.jsx)("a",{href:"https://github.com/wandb/weave/blob/master/docs/./notebooks/Intro_to_Weave_Hello_Trace.ipynb",target:"_blank",rel:"noopener noreferrer",class:"navbar__item navbar__link button button--secondary button--med margin-right--sm notebook-cta-button",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",alt:"View in Github",height:"15px"}),(0,o.jsx)("div",{children:"View in Github"})]})})]}),"\n",(0,o.jsx)("img",{src:"http://wandb.me/logo-im-png",width:"400",alt:"Weights & Biases"}),"\n",(0,o.jsx)(n.p,{children:"Weave is a toolkit for developing AI-powered applications."}),"\n",(0,o.jsx)(n.p,{children:"You can use Weave to:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Log and debug language model inputs, outputs, and traces."}),"\n",(0,o.jsx)(n.li,{children:"Build rigorous, apples-to-apples evaluations for language model use cases."}),"\n",(0,o.jsx)(n.li,{children:"Organize all the information generated across the LLM workflow, from experimentation to evaluations to production."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Weave traces let you automatically capture the inputs, outputs, and internal structure of your Python functions\u2014especially useful when working with LLMs. By decorating a function with ",(0,o.jsx)(n.code,{children:"@weave.op"}),", Weave records a rich trace of how your function runs, including any nested operations or external API calls. This makes it easy to debug, understand, and visualize how your code is interacting with language models, all from within your notebook."]}),"\n",(0,o.jsxs)(n.p,{children:["To get started, complete the prerequisites. Then, define a function with the ",(0,o.jsx)(n.code,{children:"@weave.op"})," decorator to track LLM calls, run it on an example input, and Weave will automatically capture and visualize the trace."]}),"\n",(0,o.jsx)(n.h2,{id:"-prerequisites",children:"\ud83d\udd11 Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Before you can begin tracing in Weave, complete the following prerequisites."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Install the W&B Weave SDK and log in with your ",(0,o.jsx)(n.a,{href:"https://wandb.ai/settings#api",children:"API key"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Install the OpenAI SDK and log in with your ",(0,o.jsx)(n.a,{href:"https://platform.openai.com/api-keys",children:"API key"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Initialize your W&B project."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Install dependancies and imports\n!pip install wandb weave openai -q\n\nimport os\nimport json\nimport weave\n\nfrom getpass import getpass\nfrom openai import OpenAI\n\n# \ud83d\udd11 Setup your API keys\n# Running this cell will prompt you for your API key with `getpass` and will not echo to the terminal.\n#####\nprint("---")\nprint("You can find your Weights and Biases API key here: https://wandb.ai/settings#api")\nos.environ["WANDB_API_KEY"] = getpass(\'Enter your Weights and Biases API key: \')\nprint("---")\nprint("You can generate your OpenAI API key here: https://platform.openai.com/api-keys")\nos.environ["OPENAI_API_KEY"] = getpass(\'Enter your OpenAI API key: \')\nprint("---")\n#####\n\n# \ud83c\udfe0 Enter your W&B project name\nweave_client = weave.init(\'MY_PROJECT_NAME\') # \ud83d\udc1d Your W&B project name\n'})}),"\n",(0,o.jsx)(n.h2,{id:"-run-your-first-trace",children:"\ud83d\udc1d Run your first trace"}),"\n",(0,o.jsxs)(n.p,{children:["The following code sample shows how to capture and visualize a trace in Weave using the ",(0,o.jsx)(n.code,{children:"@weave.op"})," decorator. It defines a function called ",(0,o.jsx)(n.code,{children:"extract_fruit"})," that sends a prompt to OpenAI's GPT-4o to extract structured data (fruit, color, and flavor) from a sentence. By decorating the function with ",(0,o.jsx)(n.code,{children:"@weave.op"}),", Weave automatically tracks the function execution, including inputs, outputs, and intermediate steps. When the function is called with a sample sentence, the full trace is saved and viewable in the Weave UI."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'@weave.op() # \ud83d\udc1d Decorator to track requests\ndef extract_fruit(sentence: str) -> dict:\n    client = OpenAI()\n    system_prompt = "Parse sentences into a JSON dict with keys: fruit, color and flavor."\n    response = client.chat.completions.create(\n      model="gpt-4o",\n      messages=[\n        {"role": "system", "content": system_prompt},\n        {"role": "user", "content": sentence}\n      ],\n      temperature=0.7,\n      response_format={"type": "json_object"}\n    )\n    extracted = response.choices[0].message.content\n    return json.loads(extracted)\n\nsentence = "There are many fruits that were found on the recently discovered planet Goocrux. There are neoskizzles that grow there, which are purple and taste like candy."\nextract_fruit(sentence)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"-looking-for-more-examples",children:"\ud83d\ude80 Looking for more examples?"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Check out the ",(0,o.jsx)(n.a,{href:"https://weave-docs.wandb.ai/quickstart",children:"Quickstart guide"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Learn more about ",(0,o.jsx)(n.a,{href:"https://weave-docs.wandb.ai/tutorial-tracing_2",children:"advanced tracing topics"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Learn more about ",(0,o.jsx)(n.a,{href:"https://weave-docs.wandb.ai/guides/tracking/tracing",children:"tracing in Weave"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>i});var o=t(67294);const r={},a=o.createContext(r);function i(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);