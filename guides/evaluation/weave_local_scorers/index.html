<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/evaluation/weave_local_scorers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Local Weave Scorers | W&amp;B Weave</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://weave-docs.wandb.ai/img/logo-large-padded.png"><meta data-rh="true" name="twitter:image" content="https://weave-docs.wandb.ai/img/logo-large-padded.png"><meta data-rh="true" property="og:url" content="https://weave-docs.wandb.ai/guides/evaluation/weave_local_scorers"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Local Weave Scorers | W&amp;B Weave"><meta data-rh="true" name="description" content="Weave&#x27;s local scorers are a suite of small language models that run locally on your machine with minimal latency. These models evaluate the safety and quality of your AI system’s inputs, context, and outputs."><meta data-rh="true" property="og:description" content="Weave&#x27;s local scorers are a suite of small language models that run locally on your machine with minimal latency. These models evaluate the safety and quality of your AI system’s inputs, context, and outputs."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://weave-docs.wandb.ai/guides/evaluation/weave_local_scorers"><link data-rh="true" rel="alternate" href="https://weave-docs.wandb.ai/guides/evaluation/weave_local_scorers" hreflang="en"><link data-rh="true" rel="alternate" href="https://weave-docs.wandb.ai/guides/evaluation/weave_local_scorers" hreflang="x-default"><link rel="preconnect" href="https://cdn.segment.io">
<script>!function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){if(window.analytics.initialized)return window.analytics[t].apply(window.analytics,arguments);var a=Array.prototype.slice.call(arguments);return a.unshift(t),e.push(a),e}};for(var t=0;t<e.methods.length;t++){var a=e.methods[t];e[a]=e.factory(a)}e.load=function(t,a){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://wandb.ai/sa-docs.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),e._loadOptions=a},e._writeKey="NYcqWZ8sgOCplYnItFyBaZ5ZRClWlVgl",e.SNIPPET_VERSION="4.16.1",e.load("NYcqWZ8sgOCplYnItFyBaZ5ZRClWlVgl")}}()</script>
<script>window._docusaurusPluginSegment={},window._docusaurusPluginSegment.excludeUserAgents=["GoogleSecurityScanner"]</script>


<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-NM4PR4J9",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JH1SJHJQXJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JH1SJHJQXJ",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0J3TM1K4Z4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0J3TM1K4Z4",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.d41689de.css">
<script src="/assets/js/runtime~main.c6d2b202.js" defer="defer"></script>
<script src="/assets/js/main.ef4f369f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NM4PR4J9" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">W&amp;B Weave</b></a><a class="navbar__item navbar__link" href="/">Documentation</a><a class="navbar__item navbar__link" href="/reference/gen_notebooks/intro_notebook">Cookbooks</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/guides/evaluation/weave_local_scorers">Reference</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/reference/python-sdk/weave/">Python SDK</a></li><li><a class="dropdown__link" href="/reference/typescript-sdk/weave/">TypeScript SDK</a></li><li><a class="dropdown__link" href="/reference/service-api/call-start-call-start-post">Service API</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/guides/evaluation/weave_local_scorers">Open Source</a><ul class="dropdown__menu"><li><a href="https://github.com/wandb/weave" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/wandb/weave/releases" target="_blank" rel="noopener noreferrer" class="dropdown__link">Release Changelog<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/guides/evaluation/weave_local_scorers">Community</a><ul class="dropdown__menu"><li><a href="https://www.wandb.courses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">LLM Courses<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://community.wandb.ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://twitter.com/weights_biases" target="_blank" rel="noopener noreferrer" class="dropdown__link">Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://wandb.ai/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link button button--secondary button--med margin-right--sm">Open App</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="docItemContainer_jfFK"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12 markdown"><h1>Local Weave Scorers</h1>
<a target="_blank" href="https://colab.research.google.com/github/wandb/examples/blob/master/weave/docs/scorers_local_weave_scorers.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a>
<p>Weave&#x27;s local scorers are a suite of small language models that run locally on your machine with minimal latency. These models evaluate the <strong>safety</strong> and <strong>quality</strong> of your AI system’s inputs, context, and outputs.</p>
<p>Some of these models are fine-tuned by Weights &amp; Biases, while others are state-of-the-art open-source models trained by the community. Weights &amp; Biases (W&amp;B) Reports were used for training and evaluation. You can find the full details in this <a href="https://wandb.ai/c-metrics/weave-scorers/reports/Weave-Scorers-v1--VmlldzoxMDQ0MDE1OA" target="_blank" rel="noopener noreferrer">list of W&amp;B Reports</a>.</p>
<p>The model weights are publicly available in W&amp;B Artifacts and are automatically downloaded when you instantiate the scorer class. The artifact paths can be found here if you&#x27;d like to download them yourself: <code>weave.scorers.default_models</code></p>
<p>The object returned from calling these scorers contains a <code>passed</code> boolean attribute to indicate whether the input text is safe or high quality as well as a <code>metadata</code> atttribute that contains more detail such as the raw score from the model.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>While local scorers can be run on CPUs and GPUs, use GPUs for best performance.</p></div></div>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Python</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">TypeScript</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" href="/guides/evaluation/weave_local_scorers#prerequisites">​</a></h2><p>Before you can use Weave local scorers, install additional dependencies:</p><div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token plain">pip install weave[scorers]</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="select-a-scorer">Select a scorer<a class="hash-link" aria-label="Direct link to Select a scorer" title="Direct link to Select a scorer" href="/guides/evaluation/weave_local_scorers#select-a-scorer">​</a></h2><p>The following local scorers are available. Select a scorer based on your use case.</p><table><thead><tr><th>Scorer</th><th>Scenario</th></tr></thead><tbody><tr><td><a href="/guides/evaluation/weave_local_scorers#weavetoxicityscorerv1">WeaveToxicityScorerV1</a></td><td>Identify toxic or harmful content in your AI system&#x27;s inputs and outputs, including hate speech or threats.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#weavebiasscorerv1">WeaveBiasScorerV1</a></td><td>Detect biased or stereotypical content in your AI system&#x27;s inputs and outputs. Ideal for reducing harmful biases in generated text.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#weavehallucinationscorerv1">WeaveHallucinationScorerV1</a></td><td>Identify whether your RAG system generates hallucinations in its output based on the input and context provided.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#weavecontextrelevancescorerv1">WeaveContextRelevanceScorerV1</a></td><td>Measure whether the AI system&#x27;s output is relevant to the input and context provided.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#weavecoherencescorerv1">WeaveCoherenceScorerV1</a></td><td>Evaluate the coherence and logical structure of the AI system&#x27;s output.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#weavefluencyscorerv1">WeaveFluencyScorerV1</a></td><td>Measure whether the AI system&#x27;s output is fluent.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#weavetrustscorerv1">WeaveTrustScorerV1</a></td><td>An aggregate scorer that leverages the toxicity, hallucination, context relevance, fluency, coherence scorers.</td></tr><tr><td><a href="/guides/evaluation/weave_local_scorers#presidioscorer">PresidioScorer</a></td><td>Detect Personally Identifiable Information (PII) in your AI system&#x27;s inputs and outputs using the Presidio library from Microsoft.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavebiasscorerv1"><code>WeaveBiasScorerV1</code><a class="hash-link" aria-label="Direct link to weavebiasscorerv1" title="Direct link to weavebiasscorerv1" href="/guides/evaluation/weave_local_scorers#weavebiasscorerv1">​</a></h2><p>This scorer assesses gender and race/origin bias. The scorer assesses bias along two dimensions:</p><ul>
<li>Race and Origin: Racism and bias against a country or region of origin, immigration status, ethnicity, etc.</li>
<li>Gender and Sexuality: Sexism, misogyny, homophobia, transphobia, sexual harassment, etc.</li>
</ul><p><code>WeaveBiasScorerV1</code> uses a fine-tuned <a href="https://huggingface.co/tasksource/deberta-small-long-nli" target="_blank" rel="noopener noreferrer">deberta-small-long-nli</a> model. For more details on the model, dataset and calibration process, see the <a href="https://wandb.ai/c-metrics/bias-benchmark/reports/Bias-Scorer--VmlldzoxMDM2MTgzNw" target="_blank" rel="noopener noreferrer">WeaveBiasScorerV1 W&amp;B Report</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes">​</a></h3><ul>
<li>The <code>score</code> method expects a string to be passed to the <code>output</code> parameter.</li>
<li>A higher score means that there is a stronger prediction of bias in the text.</li>
<li>The <code>threshold</code> parameter is set but can also be overridden on initialization.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveBiasScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">bias_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveBiasScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> bias_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Martian men are terrible at cleaning&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;The text is biased: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation keyword" style="color:rgb(12, 150, 155)">not</span><span class="token string-interpolation interpolation"> result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavetoxicityscorerv1"><code>WeaveToxicityScorerV1</code><a class="hash-link" aria-label="Direct link to weavetoxicityscorerv1" title="Direct link to weavetoxicityscorerv1" href="/guides/evaluation/weave_local_scorers#weavetoxicityscorerv1">​</a></h2><p>The <code>WeaveToxicityScorerV1</code> scorer assesses the input text for toxicity along five dimensions:</p><ul>
<li>Race and Origin: Racism and bias against a country or region of origin, immigration status, ethnicity, etc.</li>
<li>Gender and Sexuality: Sexism, misogyny, homophobia, transphobia, sexual harassment, etc.</li>
<li>Religious: Bias or stereotype against someone&#x27;s religion.</li>
<li>Ability: Bias according to someone&#x27;s physical, mental, or intellectual ability or disability.</li>
<li>Violence and Abuse: Overly graphic descriptions of violence, threats of violence, or incitement of violence.</li>
</ul><p>The <code>WeaveToxicityScorerV1</code> uses the open source <a href="https://huggingface.co/PleIAs/celadon" target="_blank" rel="noopener noreferrer">Celadon</a> model from PleIAs. For more information, see the <a href="https://wandb.ai/c-metrics/toxicity-benchmark/reports/Toxicity-Scorer--VmlldzoxMDMyNjc0NQ" target="_blank" rel="noopener noreferrer">WeaveToxicityScorerV1 W&amp;B Report</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-1">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-1">​</a></h3><ul>
<li>The <code>score</code> method expects a string to be passed to the <code>output</code> parameter.</li>
<li>The model returns scores from <code>0</code> to <code>3</code> across 5 different categories:<!-- -->
<ul>
<li>If the sum of these scores is above <code>total_threshold</code> (default value <code>5</code>), then the input is flagged as toxic.</li>
<li>If any single category has a score higher than <code>category_threshold</code> (default 2), then the input is flagged as toxic. Default values were fine-tuned to decrease false positives and improve recall.</li>
</ul>
</li>
<li>For more aggressive filtering, override the <code>category_threshold</code> parameter or the <code>total_threshold</code> parameter in the scorer constructor.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-1">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-1">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveToxicityScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">toxicity_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveToxicityScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> toxicity_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;people from the south pole of mars are the worst&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Input is toxic: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation keyword" style="color:rgb(12, 150, 155)">not</span><span class="token string-interpolation interpolation"> result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavehallucinationscorerv1"><code>WeaveHallucinationScorerV1</code><a class="hash-link" aria-label="Direct link to weavehallucinationscorerv1" title="Direct link to weavehallucinationscorerv1" href="/guides/evaluation/weave_local_scorers#weavehallucinationscorerv1">​</a></h2><p>This scorer checks if your AI system&#x27;s output contains any hallucinations based on the input data.</p><p>The <code>WeaveHallucinationScorerV1</code> uses the open source <a href="https://huggingface.co/vectara/hallucination_evaluation_model" target="_blank" rel="noopener noreferrer">HHEM 2.1 model</a> from Vectara. For more information, see the <a href="https://wandb.ai/c-metrics/hallucination/reports/Hallucination-Scorer--VmlldzoxMDM3NDA3MA" target="_blank" rel="noopener noreferrer">WeaveHallucinationScorerV1 W&amp;B Report</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-2">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-2">​</a></h3><ul>
<li>The <code>score</code> method expects data to be passed to the <code>query</code> and <code>output</code> parameters. The context should be passed to the <code>output</code> parameter as a string or list of strings.</li>
<li>A higher output score means that there is a stronger prediction of hallucination in the output given the query and context.</li>
<li>The <code>threshold</code> parameter is set, but can also be overridden upon initialization.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-2">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-2">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveHallucinationScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">hallucination_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveHallucinationScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> hallucination_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    query</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;What is the capital of Antartica?&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    context</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;People in Antartica love the penguins.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;While Antartica is known for its sea life, penguins aren&#x27;t liked there.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Output is hallucinated: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation keyword" style="color:rgb(12, 150, 155)">not</span><span class="token string-interpolation interpolation"> result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavecontextrelevancescorerv1"><code>WeaveContextRelevanceScorerV1</code><a class="hash-link" aria-label="Direct link to weavecontextrelevancescorerv1" title="Direct link to weavecontextrelevancescorerv1" href="/guides/evaluation/weave_local_scorers#weavecontextrelevancescorerv1">​</a></h2><p>This scorer is designed to be used when evaluating RAG systems. It scores the relevance of the context to the query.</p><p>The <code>WeaveContextRelevanceScorerV1</code> scorer uses a fine-tuned <a href="https://huggingface.co/tasksource/deberta-small-long-nli" target="_blank" rel="noopener noreferrer">deberta-small-long-nli</a> model from tasksource. For more details, see the <a href="https://wandb.ai/c-metrics/context-relevance-scorer/reports/Context-Relevance-Scorer--VmlldzoxMDYxNjEyNA" target="_blank" rel="noopener noreferrer">WeaveContextRelevanceScorerV1 W&amp;B Report</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-3">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-3">​</a></h3><ul>
<li>The <code>score</code> method expects data to be passed to the <code>query</code> and <code>output</code> parameters. The context should be passed to the <code>output</code> parameter as a string or list of strings.</li>
<li>A higher output score means that there is a stronger prediction of that the context is relevant to the query.</li>
<li>The <code>threshold</code> parameter is automatically set, but can also be overridden on initialization.</li>
<li>Passing <code>verbose = True</code> to the <code>score</code> method will return scores for each relevant chunk of text in the context.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-3">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-3">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveContextRelevanceScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">context_relevance_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveContextRelevanceScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> context_relevance_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    query</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;What is the capital of Antarctica?&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The Antarctic has the happiest penguins.&quot;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># the context is passed to the output parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Output is relevant: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavecoherencescorerv1"><code>WeaveCoherenceScorerV1</code><a class="hash-link" aria-label="Direct link to weavecoherencescorerv1" title="Direct link to weavecoherencescorerv1" href="/guides/evaluation/weave_local_scorers#weavecoherencescorerv1">​</a></h2><p>This scorer checks that the input text is coherent.</p><p>The <code>WeaveCoherenceScorerV1</code> scorer uses a fine-tuned <a href="https://huggingface.co/tasksource/deberta-small-long-nli" target="_blank" rel="noopener noreferrer">deberta-small-long-nli</a> model from tasksource. For more information, see the <a href="https://wandb.ai/c-metrics/coherence_scorer/reports/Coherence-Scorer--VmlldzoxMDI5MjA1MA" target="_blank" rel="noopener noreferrer">WeaveCoherenceScorerV1 W&amp;B Report</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-4">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-4">​</a></h3><ul>
<li>The <code>score</code> method expects text to be passed to the <code>query</code> and <code>output</code> parameters.</li>
<li>A higher output score means that there is a stronger prediction of coherence in the input text.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-4">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-4">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveCoherenceScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">coherence_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveCoherenceScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> coherence_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    query</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;What is the capital of Antarctica?&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;but why not monkey up day&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Output is coherent: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavefluencyscorerv1"><code>WeaveFluencyScorerV1</code><a class="hash-link" aria-label="Direct link to weavefluencyscorerv1" title="Direct link to weavefluencyscorerv1" href="/guides/evaluation/weave_local_scorers#weavefluencyscorerv1">​</a></h2><p>This scorer checks the input text is fluent; that is, easy to read and understand, similar to human language. The scorer assesses input along dimensions such as grammar, syntax, and overall readability.</p><p>The <code>WeaveFluencyScorerV1</code> scorer uses a fine-tuned <a href="https://huggingface.co/answerdotai/ModernBERT-base" target="_blank" rel="noopener noreferrer">ModernBERT-base</a> model from AnswerDotAI. For more information, see the <a href="https://wandb.ai/c-metrics/fluency-eval/reports/Fluency-Scorer--VmlldzoxMTA3NzE2Ng" target="_blank" rel="noopener noreferrer">WeaveFluencyScorerV1 W&amp;B Report</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-5">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-5">​</a></h3><ul>
<li>The <code>score</code> method expects text to be passed to the <code>output</code> parameter.</li>
<li>A higher output score indicates higher input text fluency.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-5">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-5">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveFluencyScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">fluency_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveFluencyScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> fluency_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The cat did stretching lazily into warmth of sunlight.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Output is fluent: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="weavetrustscorerv1"><code>WeaveTrustScorerV1</code><a class="hash-link" aria-label="Direct link to weavetrustscorerv1" title="Direct link to weavetrustscorerv1" href="/guides/evaluation/weave_local_scorers#weavetrustscorerv1">​</a></h2><p>The <code>WeaveTrustScorerV1</code> is a composite scorer for RAG systems that evaluates the trustworthiness of model outputs by grouping the outputs of other scorers into two logical categories, Critical and Advisory. Based on the compostite score, <code>WeaveTrustScorerV1</code> returns a trust level score. The values for the trust level score are:</p><ul>
<li><code>high</code>: No issues detected</li>
<li><code>medium</code>: Only Advisory issues detected</li>
<li><code>low</code>: Critical issues detected or empty input</li>
</ul><p>Any input that does not pass a Critical scorer will automatically cause the <code>WeaveTrustScorerV1</code> to return <code>low</code>, while input that doesn&#x27;t pass Advisory scorers will return <code>medium</code>.</p><ul>
<li>
<p>Critical:</p>
<ul>
<li><code>WeaveToxicityScorerV1</code>: Detects harmful, offensive, or inappropriate content</li>
<li><code>WeaveHallucinationScorerV1</code>: Identifies fabricated or unsupported information</li>
<li><code>WeaveContextRelevanceScorerV1</code>: Ensures output relevance to provided context</li>
</ul>
</li>
<li>
<p>Advisory:</p>
<ul>
<li>
<p><code>WeaveFluencyScorerV1</code>: Evaluates language quality and coherence</p>
</li>
<li>
<p><code>WeaveCoherenceScorerV1</code>: Checks for logical consistency and flow</p>
</li>
</ul>
</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-6">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-6">​</a></h3><ul>
<li>The use case for this scorer is in evalutating RAG pipelines.</li>
<li><code>WeaveFluencyScorerV1</code> requires query, context and output keys to score correctly.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-6">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-6">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> WeaveTrustScorerV1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">trust_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> WeaveTrustScorerV1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># A helper function to print the results of the trust scorer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">print_trust_scorer_result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Output is trustworthy: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Trust level: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">metadata</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&#x27;trust_level&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">not</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">passed</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Triggered scorers:&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> scorer_name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> scorer_data </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">metadata</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;raw_outputs&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">not</span><span class="token plain"> scorer_data</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">passed</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;  - </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">scorer_name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)"> did not pass&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;WeaveToxicityScorerV1 scores: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">metadata</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;scores&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;WeaveToxicityScorerV1&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;WeaveHallucinationScorerV1 scores: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">metadata</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;scores&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;WeaveHallucinationScorerV1&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;WeaveContextRelevanceScorerV1 score: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">metadata</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;scores&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;WeaveContextRelevanceScorerV1&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;WeaveCoherenceScorerV1 score: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">metadata</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;scores&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;WeaveCoherenceScorerV1&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;WeaveFluencyScorerV1: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">metadata</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;scores&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string-interpolation interpolation string" style="color:rgb(72, 118, 214)">&quot;WeaveFluencyScorerV1&quot;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># There are 2 issues with the input data: irrelevant context, hallucinated output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> trust_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    query</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;What is the capital of Antarctica?&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    context</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;People in Antarctica love the penguins.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    output</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The cat stretched lazily in the warm sunlight.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">print_trust_scorer_result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="presidioscorer"><code>PresidioScorer</code><a class="hash-link" aria-label="Direct link to presidioscorer" title="Direct link to presidioscorer" href="/guides/evaluation/weave_local_scorers#presidioscorer">​</a></h2><p>This scorer uses the <a href="https://github.com/microsoft/presidio" target="_blank" rel="noopener noreferrer">Presidio library</a> to detect Personally Identifiable Information (PII) in your AI system&#x27;s inputs and outputs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-notes-7">Usage notes<a class="hash-link" aria-label="Direct link to Usage notes" title="Direct link to Usage notes" href="/guides/evaluation/weave_local_scorers#usage-notes-7">​</a></h3><ul>
<li>To specify specific entity types, such as emails or phone numbers, pass a list of Presidio entities to the <code>selected_entities</code> parameter. Otherwise, Presidio will detect all entity types in its default entities list.</li>
<li>Pass custom recognizers to the scorer as a list of type <code>presidio.EntityRecognizer</code> via the <code>custom_recognizers</code> parameter.</li>
<li>To pass non-Englis input to the scorer, use the <code>language</code> parameter to specify the language of the text.</li>
</ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example-7">Usage example<a class="hash-link" aria-label="Direct link to Usage example" title="Direct link to Usage example" href="/guides/evaluation/weave_local_scorers#usage-example-7">​</a></h3><div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_p187"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> weave</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> weave</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">scorers </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> PresidioScorer</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">presidio_scorer </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> PresidioScorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">result </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> presidio_scorer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">score</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    output </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Mary Jane is a software engineer at XYZ company and her email is mary.jane@xyz.com.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&quot;Output contains PII: </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation keyword" style="color:rgb(12, 150, 155)">not</span><span class="token string-interpolation interpolation"> result</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">passed</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Weave local scorers are not available in TypeScript yet. Stay tuned!</p><p>To use Weave scorers in TypeScript, see <a href="/guides/evaluation/scorers#function-based-scorers">function-based scorers</a>.</p></div></div></div></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/wandb/weave/blob/master/docs/docs/guides/evaluation/weave_local_scorers.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-03-26T18:36:20.000Z" itemprop="dateModified">Mar 26, 2025</time></b></span></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#prerequisites">Prerequisites</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#select-a-scorer">Select a scorer</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavebiasscorerv1"><code>WeaveBiasScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavetoxicityscorerv1"><code>WeaveToxicityScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-1">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-1">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavehallucinationscorerv1"><code>WeaveHallucinationScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-2">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-2">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavecontextrelevancescorerv1"><code>WeaveContextRelevanceScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-3">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-3">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavecoherencescorerv1"><code>WeaveCoherenceScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-4">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-4">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavefluencyscorerv1"><code>WeaveFluencyScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-5">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-5">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#weavetrustscorerv1"><code>WeaveTrustScorerV1</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-6">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-6">Usage example</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#presidioscorer"><code>PresidioScorer</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-notes-7">Usage notes</a></li><li><a class="table-of-contents__link toc-highlight" href="/guides/evaluation/weave_local_scorers#usage-example-7">Usage example</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Made with ❤️ by Weights & Biases</div></div></div></footer></div>
</body>
</html>